const input = `
...................................................................................................................................
..........#.............#...#........#....#.......#.#..#...........................##......#......#..#.###................#........
...#.#.......#.#......#.......#.........#.........#..#.#...........................................#........#...#.......#....#.#...
..#......#...#.........#...#......##......#.........#...........................#......##......##.....#...##.#....#...#............
......#...........#.............#......#.....#...#.#.#......................#..#...#.#......#..............#.......................
.#..........#.#.#.....................#......#...#.........................#.#...#...##......#.....#..#..........##................
.....#.#......#.........#.........##.....#..##.##..#.......................#.......###.#....#...#...#.......#.#..#.#..........##...
..#..#.....#....#..............................#...............#...................#...#.....#.#......#............................
..#..#........#....##..#.......#......#.#..##.................................#..#..................#................#....#........
.#..#........................#..#.....#.......##..............#............................#...........#.........#........###......
....#....#..#....#...#.........#.....#.#...#..#............#.......#...........##...##.#.#...#.....##..............................
....#..#.........#..#......#.....................##........#.........................#.............#.#....#.................#......
...#.......#......#............#......#...#....#...............#........#...............#...............##..#.#.......#..###..#....
......#..#.....#.....##...#..#.#..........................#..........................#........#.........................#......#...
.#.......##.........#.......#.#........................##..#...#...#.#.#................#..........#......#.......#...##..#..##.##.
..........#.............#.........#...##.................#.............#.#..............#.......##.....#..........#....#...........
.....#.#............#..#.............................#....##.............#...........#....#..........#.......................#.....
...................#................#................##......#.....#...##...#.............#.....#.......#.....................#....
.......#.#.#............#....##....#................#......#.#....#..#......#.#........................#.#...........#.....#.......
.....#.....#...###.......#.......#.#..#.................##.........##...........................##....#...##...........#...........
..#...#.........#...#..................#...........#.......#.#......#...#...................#..#.#..#......#..#.....#...........#..
.#...........#....#.....#.....#........#...........#..#..##...#...........#....##..............##........#...#...............#.#.#.
................#....#..#........#..#.#....................#................#.....#.............#..........#........#.....#..#.....
............................###...##...........#.#.....##....#....##..##...#..................##.........##............#..###......
.#..##........#.#......#...#.##....................#.........................#............................##....#..................
..#.........#..#.........#........................#.....##.............##.....#...............##........#....####..................
...#.#.##........................#.#...........#........##........................#............#.#.....#..........#....#...........
....#....#.....##...........#.....#..........#...#...#..............#...........#...............#...............#.....#....#.......
.#.........#....#.#................................#.....#.....#....#........#.........##.............#..#....#.......#.....#..#...
......##.....#.......#..........#.........#.#.........##....##.#...........##...#.#.......#......................#.................
..............#............#............#..............#.#.........###....#.#.......#.....#.......................#....#....#.#....
............##.....#.#.......#.........#.#..#..#.........#......#....#.....#....#.......................#.....#......#.............
..#.#....#....#.........##..#...................#..#..............#.......#.............................##...............#.........
.#....#...............#...#..........#..........#.........###..#.......#..##........#.#.....#..........#.....#.............#.......
.......#....#..........#.......................#..##.#.............#......................................#..............#...#.....
..#.##..........#............................#.............#..........#....#.......#...#..##.................................#.##..
......#...#..........#......................................#...........#..#.......#......#.#..............................#...#...
.#.#................##............#.......##......................#..#..#.....#.#..........#......................##...............
..#........#........#.............#..........#.....#..................#........#........#.................................#........
.###..##..#........................#.#......#........##.....#.....#......#..#........#.....#.................#...#.......#.........
.......#......#................#......#......##...............#................#....#..#...#....................###.....#.....#....
..#...........#...............................#...##....##...........#.#.#........................#................#......#......#.
....#..#.#...........................#....#.#..............#............#..#..##................#...............#..#..#.......##...
....##.#.......................#.....................#....#...................#.....#...#..............#.........#.#........#..#...
...##..........##........#.....#..........##...#..........................#.........#..#..#......#....................#.....##.....
..#......#...................#..#.##.........#.......#........................#.#.#.........................................#....#.
.#....####................#....#.#..#.#......#................#.....................#.#....#........#..##..........................
...........#.#...........##...............#..........#......................##....#.......#...##.....#....................#..#.....
.#..#................#...................#..#........#.....#.............................#.#...##.....................#........#...
........##..#................#..#....#........#......#..#.............#..........#...........#..............#.........#....#.......
..##....##.#.........#.#........#...........##..###..#.......#..................................#.#......#..#..#............#.##...
...........................#...#..#..##....#...#.......................#.....#...#.................................................
..#..#..#...................#..............................................#..#......#.......#................#.#..........#.......
........#.......##..........#.......#............#.##...............#......#...........#...............#..................###......
.#.#................#.....#..#.#...#...........................#.....#..#..........#...............#.#.............................
..............#.......................#........#.#.................................#.......#...#....#........#.#....#........#.....
..##....................#....#....#.........#..##..........#.......##..................................#..#..##..#...#.............
...#.............#......#....#...##........#......................#.............#......##............#..........##.................
..................##......#.........#....#..........#.#........................##.##.........................##....................
................#........#..#......................#.........#..............#....#...#...#..........................#..............
...................##...##..............#..#..#.#...##.....#.........##...........................#...##.#.........................
............#......#..........#......#..#.....##......#.................#..........#......#...#.........#........##.#..............
.....................#.#........................#...............#......#.#..#.........#....#................#..............#.......
..................#......#.#.....#......#............##.....#.#........#.#........#...#....#.....##..........#...#.................
........#...............................#.......#.........#....#...###......##..#....#.........#..##.........#.....#.......#.......
.................................................................S.................................................................
.....#.#......#.......##.#..#....#..#..#..............#...............#.............##.....#...#.###............#..................
.............#.........#.........#...........##.....#...........#..............#...#.................#.#..................#........
.......#.#...................#..........#..............##....##.............#..........#..#..#.........##..........................
...........#....#..............##........#............#...#....##........#.#....#.#.#...............#...#....#..........#..........
...........##.#.#.#......#........#..#....#...#........................#.............#......##...##..#.#...##........#.............
..#.......##....#...........#..................#....#....#..#.......###......................#.......................#.#...........
..............#......#.#..#...#.#.......................................#.###.................#............#...#...................
............#.........#.#.........##......................#..........#.......#....#.................#........#...#..##...........#.
...............#....#...#......#.....#......#.....#.....#....##...............#...............#....#............#..#...............
....##.........#.#....#.........#.....#.#...........#...............#.....###.........#..............#.....#.......................
..#.#....................#.......#..........#....#...#....#..#......#..#.##...#.#.#..#.#.......................##..............#...
....#..................#...#..#................#..#.#.................##..#..........#....#..............#...#.....................
..#....#...............................#.....#.......#..............##.#......#....#..........#..#....#.#.................#........
......##.......................#.......#.......................#...#......##...#.........#..#.......#...................#..........
...##.#..............#.....#..#.#...#......##.......#.........#.#..............#.....#...#..#...#.........#........................
....##.#......................##.#...#.........#........................#.#.................#......##........#...............#..#..
....#...##...........#.....#................#..#........#....#.............#.#.......................#....................#........
........##........................................#................#......................#................#.........##.#....#...#.
....#......#............#................#..................#........#...#.................#.............#.........#..#.#..........
.#.........#...................................#..............#.#....................#..................................#.#..##..#.
..##..#.##................#............#........#...........................#......###..#.....#..#...#............#.#.#....#.......
..........#........................#..#....###..##...#..............###..............#..#....#.#.##..................#.......#.....
.....#..#....#..............................................#...................#..................#.................#........#..#.
.....#...#.......#..#......................#.#...#.....#..#...#......#..#....#.#..............#.#.....#.......##.#...###......#.#..
...........................................#.#............#....#........#........#...........#.#..............................#....
......#........##..#.............#.#...##..#......................#......#.........#.#....#.................#......................
.#.#...#.#..#.#....##..............##...#......#.#....#....#....#.##...................#...##...#....................#...#.........
.#...#...........#................................#...###.............#.....#.........#....##...#..............#.............#...#.
............#.....................#..#.#..#............#....#...............#.#.......#..##................#............##.........
..#............##.......#.#...........#....#...#.....#.........#...........#..........#......#..........#......#...#....##.........
....#...................................................#.....#...#.................#.......#.#..............#.......#.#.#..##.....
..#.........##.#.#......#..#.........#.#...........##....#.........#...............#..#.......#....................#...............
.#..#...........##.#..........................#...............#.........#.................#............#...#.........#...#.......#.
...........#.................#.............................#............................#...........#.....##..........#...#....#...
....##..............##.....#..#...........#.........#..#.....#..#...............#..........#...............##....#......#........#.
.#...#.....#...........#..................#...#..###....#.........#..........#..#..#....#.#........##.#..##......#..........#......
.....#.#.#......##...#..........#..........#......#....#.................................#...........#...#.......#.............#...
....................#.......#.............#.......#.#....#......#...............#.....#.........#...##...#...............#.#.....#.
.#......#..................................#...........#.#.....#..#..#.....#....#.......................#..#....###..#.....##......
.......#.......#.......#.#..#...............#.#..#..#...#.#.....#.....#............#..#................................#...#.....#.
.#........##...........#.....#.....#...............................##..##...#......................#...........................##..
...............#........#.....#.##............#.#.................#....#.#..........#..........#....................#.........#....
.........................#..#....#..................#......##...............................#..#.....#.#.#................#.#....#.
......#.....................#..#..#..................................#..##....#................#...............#...#.#.............
....#.#.........#.............#.......#............#.....................................#.#.........#...#.......#....#.#..........
...#...##......#.#......#..#..#........###.................#.........#...#.#.............#.#...............#.............#.........
....#.......#.#.....#........#.........#...................#..#.....#....#...............#.........#...#.#.#.....#...........#.....
......#.#..........#..#..................#............................#..##...............##.....#..#..............................
............#.............................#.#...............#...#.....#..#.............#..........#.#...#......................#...
..#.###............................#.....#................#..##...##........#..........##........#........#.#......................
............###..........#..........#......#.............#...#.............#.......#..........#.#.....#......#..........#......#...
...#........#......#.............#.......#.....................#......##.................#.#........#.......................#.#....
.........#...#........#...#...##.#...#....#...#...................#.#.#............#.......#..#........#..#........#...............
.......................#..##.#.#.......#....#....#.....................................##...#........#.......................#.....
...#.##..#................#........................................##............#........#.......###.#.......#......#.#...........
......#....#......#..................#.....#......#.#.................................#.##..#.#.#.............#....#......#........
....##.....#.......##......#.#.....##.#........................#..............#........#..#....#................#.#.#..#....#......
......#.....#......#...#......##...#...........#....#..........................##.#..#..........#..#...............#....##..#...##.
...................#.#.......#.........#........#.................#.........#.......................#...#...#..#....#.#.....##.....
....#..#...#.#.#...#.#........................#........##.................#..........#.#.............#.....#....#..........##...#..
.....................##..........#....#....##...#..#...............................#........#...........#......#..##..#............
....#....##..#...#.......##..#....#..#........#.........................#...#....#.....#..........................#..##..#....#....
.................................#...#..#...#.#......#....#............#.......#......##.#.#.#....#............................#...
.......#.........#........#.###..................#..#.#.........................#.....#............#.............#......#..........
...................................................................................................................................
`

const tiles = input.trim().split("\n").map(row => row.trim().split(""));

const getStartPosition = (tiles) => {
    const rowCount = tiles.length;
    const colCount = tiles[0].length;
    let result = [];
    for (let i = 0; i < rowCount; i++) {
        for (let j = 0; j < colCount; j++) {
            if (tiles[i][j] === "S") {
                result = [i, j];
                break;
            }
        }
    }

    return result;
}


const pathFind = (tiles, startPosition, stepsCount) => {
    const rowCount = tiles.length;
    const colCount = tiles[0].length;
    const isValid = ([row, col]) => row >= 0 && row < rowCount && col >= 0 && col < colCount && tiles[row][col] !== "#";
    const getNeighbors = ([row, col]) => [[row - 1, col], [row, col + 1], [row + 1, col], [row, col - 1]].filter(isValid);


    const queue = [startPosition];
    let neighborQueue = [];
    for (let i = 0; i < stepsCount; i++) {
        const visited = Array.from({length: rowCount}, () => Array.from({length: colCount}, () => false))
        const visit = ([row, col]) => visited[row][col] = true;
        const isVisited = ([row, col]) => visited[row][col];
        while(queue.length) {
            const [row, col] = queue.shift();
            visit([row, col]);
            getNeighbors([row, col]).forEach(item => {
                if (!isVisited(item)) {
                    visit(item);
                    neighborQueue.push(item);
                }
            });
        }
        queue.push(...neighborQueue);
        neighborQueue = [];
    }

    // console.log(
    //     tiles.map((row, rowIndex) => (
    //         row.map((col, colIndex) => (
    //             queue.find(item => item[0] === rowIndex && item[1] === colIndex) ? "O" : col
    //         )).join("")
    //     )).join("\n")
    // )
    return queue.length;
}
const start = getStartPosition(tiles)
const stepsCount = 64;

console.log(pathFind(tiles, start, stepsCount));
